import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import { FC, useState } from 'react'
import styled from 'styled-components'

import Subject from "./Cropper";
import Example from "./Example";

import example from './static/example.jpg'


<Meta title="Cropper" component={Subject}/>

# Cropper

## Basic

<Preview>
  <Story name="cropper displayed">
    <Subject image={example}/>
  </Story>
</Preview>

## Cropped image

<Preview>
  <Story name="obtain cropped image">
    {
      () => {
        const HBox = styled.div`
          display: flex;
        `
        const Img = styled.img`
          margin-left: 2rem;
          width: auto;
          height: 267px;
          border-radius: 50%;
        `
        let [croppedImage, setCroppedImage] = useState()
        return (
          <HBox>
            <Subject image={example} onChange={setCroppedImage}/>
            <Img src={croppedImage}/>
          </HBox>
        )
      }
    }
  </Story>
</Preview>

## API

<Props of={Subject} />

## Note

1. The cropper uses [react-easy-crop] under the hood. For fully flexible cropper, see [react-easy-crop]. But you will need to implement the cropped image getter algorithm yourself.
2. As [react-easy-crop] uses `position: relative;` and `position: absolute;` to locate its components, the outer div of the cropper is recommended to be fixed-size. Otherwise some initial render problems may occur.

[react-easy-crop]: https://www.npmjs.com/package/react-easy-crop
